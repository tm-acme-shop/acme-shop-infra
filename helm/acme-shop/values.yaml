# AcmeShop Helm Values
# Security hardened configuration

replicaCount: 3

image:
  repository: ghcr.io/acme-shop/app
  tag: "2.0.0"
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  port: 80

# HTTP client configuration - TLS enabled
httpClient:
  insecureSkipTLSVerify: false
  timeout: 30s
  tlsMinVersion: "1.2"

# Security settings - fully configured
securityContext:
  runAsNonRoot: true
  runAsUser: 1000
  readOnlyRootFilesystem: true
  allowPrivilegeEscalation: false

# Environment variables
env:
  - name: LOG_LEVEL
    value: "info"
  - name: ENABLE_DEBUG
    value: "false"
  - name: DATABASE_URL
    valueFrom:
      secretKeyRef:
        name: acme-shop-secrets
        key: database-url

# Network policy
networkPolicy:
  enabled: true
  allowExternal: false

# DEPRECATED: Legacy configuration - scheduled for removal
# TODO(TEAM-INFRA): Remove legacy section after migration
legacy:
  enabled: false
  httpClient:
    insecureSkipTLSVerify: true
